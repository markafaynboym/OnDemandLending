---
title: "📊 Mail Data Ad Metrics"
author: "Mark Faynboym"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output: 
  html_document:
    toc: true
    theme: yeti
    highlight: pygments
    toc_float: true
    df_print: paged
    number_sections: no  
#     title: "📊 Mail Data Ad Metrics"
# author: "Mark Faynboym"
# date: "2025-10-11"
# output: 
#   pdf_document:
#     toc: true
#     number_sections: false
# always_allow_html: true
---
# Introduction

We scrape the following OnDemandLending Mail Data from Lodasoft... 

- CRM 
- LOS 
- Loans funded
- Total Mail Count (manually entered)

## 🎯 Objective: Ad Metrics

We are investigating the effectiveness of our ad campaigns from OndemandLending's marketing contractors 

The goal is to understand how well our ad spend is performing by evaluating the following metrics:

- 📞 **Response Rate: **What is the percentage of calls we get by ad company?
- 🔒 **Call to Lock Rate: ** How many calls turn into locks
- 💰  **Lock to Fund Rate: ** How many locks convert to a funded loan
- *Total-Mail-To-Fund: * to look at direct imact of Total mail on funding loans
- *Further exploration: * to see if we can do insights on campaign data that has been given time to reach its clients and it's efficiency on loan-funding. 

We end with a Conclusion, further questions, considerations and fix-me's to improve upon our current analysis.

Feel free to toggle on the table-of-contents to move from one section to another.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
library(tidyverse)
library(lubridate)
library(plotly)
library(knitr)
library(kableExtra)
library(DT)
library(patchwork)
```

```{r}
# Load MailData.csv from 'data/processed' folder
maildata <- read_csv("../../data/processed/MailData.csv")
```

```{r}
## Clean code and convert from strings to date and numeric format

# Clean column names from spaces and symbols(ASCII)
maildata <- janitor::clean_names(maildata)

# Convert date column
# maildata <- maildata %>%
#   mutate(mail_date = mdy(mail_date))

# Convert percentage columns to numeric
percent_cols <- c("response_rate", "call_to_lock", "lock_to_fund")
maildata <- maildata %>%
  mutate(across(all_of(percent_cols), ~ as.numeric(str_remove(., "%"))))

# Convert numeric columns
numeric_cols <- c("calls", "locks", "fundings")
maildata <- maildata %>%
  mutate(across(all_of(numeric_cols), ~ as.numeric(.)))

maildata <- maildata %>%
  mutate(mail_multiplier = case_when(
    is.na(total_mail_pieces) ~ NA_real_,         # Handle missing values
    total_mail_pieces == 0 ~ NA_real_,           # Prevent division by zero
    TRUE ~ round(10000 / total_mail_pieces, 2)   # Safe division
  ))

# Apply multiplier to selected columns
scaled_cols <- c("calls", "locks", "fundings")

maildata <- maildata %>%
  mutate(across(all_of(scaled_cols),
                ~ round(. * mail_multiplier),
                .names = "{.col}_per_10k"))
```

First we generate a table to easily look through and compare values. 

**Please note** that there are some campaigns with NO TOTAL MAIL PIECE VALUES. A separate table is at the bottom of the report of all instances. Please make sure to update the Total Mail Pieces values. For now we will ignore missing values

# Mail Data Table
If you want the colored table, please find it in this googlesheet. Use the sheet with the newest date 
https://docs.google.com/spreadsheets/d/10VvrSzbbMOW8qdFZzxWBeUl8HO4qnqXDH-B_2vL8PlI/edit?usp=sharing 

```{r}

# 🟩 Render searchable table with column filters
datatable(
  maildata,
  filter = "top", 
  options = list(
    pageLength = 5,
    scrollX = TRUE,
    dom = 'Bfrtip',  # 👈 enables buttons
    buttons = c('copy', 'csv', 'excel', 'pdf', 'print')  # 👈 export formats
  ),
  extensions = 'Buttons',
  rownames = FALSE,
  caption = "📋 Mail Data"
)

```

Now, lets look at the metrics; the response rate, call-to-lock rate and the lock-to-fund rate. 

Recall we've decided to only look at metrics in 2025 as the last year is irrelevant in our data

```{r}
# Prepare data
plot_data <- maildata  %>%   arrange(mail_date) %>% 
  mutate(campaign_name = factor(campaign_name, levels = c("Camber", "Monster", "Amsive", "Redstone")))

#%>%
  # filter(!is.na(campaign_name), !is.na(response_rate)) %>%
  #mutate(response_rate = as.numeric(response_rate))
```

# Response Rate

### Bar graph


```{r}

# Build bar plot with uniform widths and ordered campaigns
p <- ggplot(plot_data, aes(x = mail_date, y = response_rate, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 0.01), width = 7, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Response Rate Over Time by Campaign",
    x = "Mail Date",
    y = "Response Rate (%)",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

# Make it interactive
#ggplotly(p)
```

 
1) Camber outperforms Amsive significantly in each campaign.

2) Each campaign has a decreasing trend. This makes sense because campaigns that have been out longer have more time to reach slow-responding clients (longer exposure to market).

```{r}
# 🟩 Ensure mail_date is a proper Date
plot_data_YTD <- plot_data %>% 
  filter(mail_date >= as.Date("2024-12-30") ) 


p <- ggplot(plot_data_YTD, aes(x = mail_date, y = response_rate, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 0.01), width = 6, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Response rate by Campaign (2025)",
    x = "Mail Date",
    y = "Response Rate (%)",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```


To have a better visual we make a box plot to look at our values. We only use the dates after 05/05/2025 where both campaigns have roughly the same start times. We don't want earlier Amsive data to ruin our comparison.

Observations: 
Camber is significantly outperforming Amsive

### Box Plot

```{r}
plot_data_datecutoff <- plot_data_YTD %>% filter(mail_date >= as.Date("2025-05-05"))


# 🟩 Build ggplot BoxPlot
p <- ggplot(plot_data_datecutoff %>% filter(!is.na(total_mail_pieces)), aes(x = campaign_name, y = response_rate, fill = campaign_name)) +
  scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  geom_boxplot(alpha = 0.7, color = "gray20") +
  labs(title = "📈 Response Rate by Campaign",
       x = "Campaign Name",
       y = "Response Rate (%)",
       fill = "Campaign") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")

# Make it interactive
ggplotly(p)
```

### Test of campaigns being equal ( favor is in Camber)

**Note to the statistician / data scientist. 
With observations of about 60 total (30 each) a Welch's t-test is appropriate as unequal variance is a possibilty. (Unlike Gosset's Student's t-test which assumes equal variance)

if n > 30 , we can make the assumption that for CLT the sample mean follows a normal distribution. It does not mean the values themselves are normal. At the time of be writing this, n = 78 thus using the Welch's t-test is considered appropriate. 
** End Note

The probability of observing a difference as extreme or more extreme for Camber and Amsive in response rate is the p-value. At the time of this writing it is 0.007 which is 0.7% chance --> Camber is significantly better than Amsive at Response rates


```{r}
# Step 2: Split into groups
amsive_calls <- plot_data$calls_per_10k[plot_data$campaign_name == "Amsive"]
camber_calls <- plot_data$calls_per_10k[plot_data$campaign_name == "Camber"]

# Step 3: Run two-sample t-test
t.test(amsive_calls, camber_calls,
       alternative = "two.sided",
       var.equal = FALSE)  # Welch's t-test (default)
# 
# # Step 3: Run one sided test t-test
# t.test(camber_calls,amsive_calls, 
#        alternative = "greater",
#        var.equal = FALSE)  # Welch's t-test (default)
```


# Call-To-Lock

We will continue to Call-to-Lock

### Bar Graph

By looking at the bar graph, we can see Amsive doing better than Camber but not definitively. 
Let's try a box plot

```{r}
p <- ggplot(plot_data_datecutoff, aes(x = mail_date, y = call_to_lock, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 4), width = 2.6, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Call-To_lock by Campaign (From 05/05/2025)",
    x = "Mail Date",
    y = "Calls-To-Lock (%)",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```

### Box Plot

With our box plot we see  Amsive seems to be doing slightly better in the call-to-lock portion of our loan pipeline. 

```{r}
# 🟩 Build ggplot BoxPlot
p <- ggplot(plot_data_datecutoff %>% filter(!is.na(calls)), aes(x = campaign_name, y = call_to_lock, fill = campaign_name)) +
  scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  geom_boxplot(alpha = 0.7, color = "gray20") +
  labs(title = "📈 Call-To-Lock by Campaign (From 04/30/2025)",
       x = "Campaign Name",
       y = "Calls-To-Lock (%)",
       fill = "Campaign") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")

# Make it interactive
ggplotly(p)
```

The hypothesis test shows that theres  a 22% of observing the difference betweenCamber and Amsive performance in Call-to-Lock assuming true means are equal. (Much less than 0.7% in Response rate, not significant)

```{r}
# Step 2: Split into groups
amsive_calltolock <- plot_data_datecutoff$call_to_lock[plot_data$campaign_name == "Amsive"]
camber_calltolock <- plot_data_datecutoff$call_to_lock[plot_data$campaign_name == "Camber"]

# Step 3: Run two-sample t-test
t.test(amsive_calltolock, camber_calltolock,
       alternative = "two.sided",
       var.equal = FALSE)  # Welch's t-test (default)

# # Step 3: Run one sided test t-test
# t.test(camber_calltolock,amsive_calltolock, 
#        alternative = "greater",
#        var.equal = FALSE)  # Welch's t-test (default)
```



# Lock-To-Fund

Now we view the final metric, Lock-To-Fund

### Bar Graph
We don't see too much difference here.

```{r}
p <- ggplot(plot_data_datecutoff, aes(x = mail_date, y = lock_to_fund, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 4), width = 2.6, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Lock-To-Fund by Campaign (From 04/30/2025)",
    x = "Mail Date",
    y = "Lock-To-Fund (%)",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```

### Box plot

The box plot shows higher variability in Lock-To-Fund rates but a lower median. Amsive has a better consistency (less fluctuations.) 

```{r}
# 🟩 Build ggplot BoxPlot
p <- ggplot(plot_data_datecutoff %>% filter(!is.na(calls)), aes(x = campaign_name, y = lock_to_fund, fill = campaign_name)) +
  scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  geom_boxplot(alpha = 0.7, color = "gray20") +
  labs(title = "📈 Lock-To-Fund by Campaign (From 04/30/2025)",
       x = "Campaign Name",
       y = "Lock-To-Fund (%)",
       fill = "Campaign") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")

# Make it interactive
ggplotly(p)
```

No test will be drawn as this looks to be less significant than the Call-To-Lock observations, rendering a test useless.


# Summary

```{r}
# Load libraries
library(ggplot2)
library(plotly)
library(dplyr)

# Define color palette
campaign_colors <- c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA",
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)

# Base theme for smaller text
base_theme <- theme_minimal(base_size = 10)

# Create interactive bar charts
bar_response <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = mail_date, y = response_rate, fill = campaign_name)) +
    geom_col(position = position_dodge(width = 0.01), width = 4, color = "gray20", alpha = 0.85) +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Response Rate by Mail Date", x = "Mail Date", y = "Response Rate (%)", fill = "Campaign") +
    base_theme +
    theme(axis.text.x = element_text(size = 8, angle = 45, hjust = 1))
)

bar_call_to_lock <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = mail_date, y = call_to_lock, fill = campaign_name)) +
    geom_col(position = position_dodge(width = 0.01), width = 4, color = "gray20", alpha = 0.85) +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Call-to-Lock by Mail Date", x = "Mail Date", y = "Call-to-Lock (%)", fill = "Campaign") +
    base_theme +
    theme(axis.text.x = element_text(size = 8, angle = 45, hjust = 1))
)

bar_lock_to_fund <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = mail_date, y = lock_to_fund, fill = campaign_name)) +
    geom_col(position = position_dodge(width = 0.01), width = 4, color = "gray20", alpha = 0.85) +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Response rate                Call-To_lock              Lock-To-Fund by Campaign", x = "Mail Date", y = "Lock-to-Fund (%)", fill = "Campaign") +
    base_theme +
    theme(axis.text.x = element_text(size = 8, angle = 45, hjust = 1))
)

# Create interactive box plots
box_response <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = campaign_name, y = response_rate, fill = campaign_name)) +
    geom_boxplot(alpha = 0.7, color = "gray20") +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Response Rate by Campaign", x = "Campaign", y = "Response Rate (%)") +
    base_theme +
    theme(legend.position = "none", axis.text.x = element_text(size = 8))
)

box_call_to_lock <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = campaign_name, y = call_to_lock, fill = campaign_name)) +
    geom_boxplot(alpha = 0.7, color = "gray20") +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Call-to-Lock by Campaign", x = "Campaign", y = "Call-to-Lock (%)") +
    base_theme +
    theme(legend.position = "none", axis.text.x = element_text(size = 8))
)

box_lock_to_fund <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = campaign_name, y = lock_to_fund, fill = campaign_name)) +
    geom_boxplot(alpha = 0.7, color = "gray20") +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Response rate                Call-To_lock              Lock-To-Fund by Campaign", x = "Campaign", y = "Lock-to-Fund (%)") +
    base_theme +
    theme(legend.position = "none", axis.text.x = element_text(size = 8))
)
```

```{r}
#subplot(list(bar_response, bar_call_to_lock, bar_lock_to_fund))
```

When comparing each step in the pipeline it becomes not so clear which ad agency is better. 

```{r}
subplot(list(box_response, box_call_to_lock, box_lock_to_fund))
```

# Total Mail to Fund 

We can't see whether it's Camber or Amsive that's better so we'll look at our money in and money out values, our fundings and total mail sent out.

We calculate the total fund by 10,000 total mail to make valid comparisons. Observations show Camber may be performing slightly better than Amsive when looking at campaigns that have been given some time to have maximum exposure to the market. We'll continue to explore.

```{r}
p <- ggplot(plot_data_datecutoff, aes(x = mail_date, y = fundings_per_10k, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 4), width = 2.6, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Total Mail-To-Fund per 10K total mail by Campaign (From 04/30/2025)",
    x = "Mail Date",
    y = "Total Mail-To-Fund (%)",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```

In our box plot we see medians being about the same with Amsive having a slightly higher distribution. (In slight favor of Amsive)

```{r}
# 🟩 Build ggplot BoxPlot
p <- ggplot(plot_data_datecutoff %>% filter(!is.na(calls)), aes(x = campaign_name, y = fundings_per_10k, fill = campaign_name)) +
  scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  geom_boxplot(alpha = 0.7, color = "gray20") +
  labs(title = "📊 Total Mail-To-Fund by Campaign (From 04/30/2025)",
    x = "Mail Date",
    y = "Total Mail-To-Fund (%)",,
       fill = "Campaign") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")

# Make it interactive
ggplotly(p)
```

# Additional Exploration

```{r}

# Aggregate by month
monthly_data <- plot_data_datecutoff %>%
  mutate(month = floor_date(mail_date, "month")) %>%
  group_by(month, campaign_name) %>%
  summarise(
    fundings_per_10k = mean(fundings_per_10k, na.rm = TRUE),
    .groups = "drop"
  )

# Bar chart: average fundings_per_10k by month
bar_monthly <- ggplotly(
  ggplot(monthly_data, aes(x = month, y = fundings_per_10k, fill = campaign_name)) +
    geom_col(position = position_dodge(width = 5), width = 20, color = "gray20", alpha = 0.85) +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Monthly Fundings per 10k Total Mail sent by Campaign", x = "Month", y = "Fundings per 10k", fill = "Campaign") +
    theme_minimal(base_size = 10) +
    theme(axis.text.x = element_text(size = 8, angle = 45, hjust = 1))
) %>% layout(title = list(text = "Monthly Fundings per 10k by Campaign"))

# Box plot: distribution of fundings_per_10k by campaign
box_monthly <- ggplotly(
  ggplot(plot_data_datecutoff, aes(x = campaign_name, y = fundings_per_10k, fill = campaign_name)) +
    geom_boxplot(alpha = 0.7, color = "gray20") +
    scale_fill_manual(values = campaign_colors) +
    labs(title = "Distribution of Fundings per 10k by Campaign", x = "Campaign", y = "Fundings per 10k") +
    theme_minimal(base_size = 10) +
    theme(legend.position = "none", axis.text.x = element_text(size = 8))
) %>% layout(title = list(text = "Distribution of Fundings per 10k by Campaign"))
```


### Monthly performance of number of funded loans per 10,000 total mail

The monthly funding bar chart seen below (Fundings per 10,000 total mail in a given month),  we are seeing that as time goes on, Camber may be outperforming Amsive though that remains to be seen in time.


```{r}
bar_monthly
```
### Summer mail data analysis

Furthermore, we narrow down our data to between 05/05/2025 - 08-01-2025 and consider how much mail has been sent out. Wee see there has been more Amsive than Camber sent out in the beginning but now the advertisements are evening out.

```{r}
p <- ggplot(plot_data_datecutoff %>% filter( mail_date <= as.Date("2025-08-01")), aes(x = mail_date , y = total_mail_pieces, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 0.01), width = 2, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Total Mail Pieces by date sent out (05/05/2025 - 08-01-2025)",
    x = "Mail Date",
    y = "Total Mail by date",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```

It should be noted that Camber has shown to be more effective with smaller amounts of mail.

Are ad campaigns less efficient when you send out more mail? After a certain amount of mail sent out, are the people that they select of lower lead quality? 
THIS IS WORTH CONSIDERING

```{r}
p <- ggplot(plot_data_datecutoff %>% filter( mail_date <= as.Date("2025-08-01")), aes(x = total_mail_pieces, y = fundings_per_10k, fill = campaign_name)) +
  geom_col(position = position_dodge(width = 0.01), width = 200, color = "gray20", alpha = 0.85) +
scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  labs(
    title = "📊 Fundings vs Total Mail Pieces sent out (05/05/2025 - 08-01-2025)",
    x = "Mail Date",
    y = "Total Funded per 10k",
    fill = "Campaign"
  ) +
  theme_minimal(base_size = 14) +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))

ggplotly(p)
```

From 05/05/2025 when Camber campaigns start running, we see a higher median and upside distribution to Amsive. These are the longest exposed campaigns which could indicate favor to Camber. We will want to wait and see how newer campaigns do over the next year.

```{r}
p <- ggplot(plot_data_datecutoff %>% filter( mail_date <= as.Date("2025-07-01")), aes(x = campaign_name, y = fundings_per_10k, fill = campaign_name)) +
  scale_fill_manual(values = c(
  "Camber" = "#E26E5F",   
  "Amsive" = "#44CDDA" ,
  "Monster" = "#87d087",
  "Redstone" = "#AD2E1D",
  "Other" = "#979d5d"
)) +
  geom_boxplot(alpha = 0.7, color = "gray20") +
  labs(title = "📊 Total Mail-To-Fund by Campaign (Summer 2025)",
    x = "Mail Date",
    y = "Total Mail-To-Fund (%)",,
       fill = "Campaign") +
  theme_minimal(base_size = 14) +
  theme(legend.position = "none")

ggplotly(p)
```



# Conclusion

So far, here are the observations that we see. 

When comparing Camber to Amsive which are our two dominant campaign ad agencies, we notice Camber out-performs Amsive when it comes to the number of calls we get per total mail sent, however under performs when it comes to conversion to locks and not much of a difference when converting locks to funds. 

When looking directly at Total mail sent conversion to Funded loans, we see that Camber is doing better given enough time goes by in the campaign.


# Further questions


# Future considerations.
- Check the average loan amount of Camber vs Amsive. (Loan amount distribution)
- Which states have the most funded loans?
- Total volume of calls, locks, funds by month

# Fix Me 

We have some mailing campaign dates unaccounted for that could help us in future analyses. Can we get an update on them?

```{r}
# NA values Need to either ignore these or populate the total mail pieces(Lower case and no spaces for snake type)
maildata_totalmail_na <- maildata %>% filter(total_mail_pieces==0) %>% mutate(total_mail_pieces = NA_integer_)


# 🟩 Render searchable table with column filters
datatable(
  maildata_totalmail_na,
  filter = "top",
  editable = TRUE,
  options = list(
    pageLength = 5,
    scrollX = TRUE,
    dom = 'Bfrtip',  # 👈 enables buttons
    buttons = c('copy', 'csv', 'excel', 'pdf', 'print')  # 👈 export formats
  ),
  extensions = 'Buttons',
  rownames = FALSE,
  caption = "📋 Total Mail Data missing from select dates"
)
```

--End--